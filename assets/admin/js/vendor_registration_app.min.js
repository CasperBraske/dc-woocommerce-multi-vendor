var app=angular.module("vendor_registration",["ui.sortable"]);app.service("vendor_registration_service",function(){var e=[];if(""!==vendor_registration_param.form_data){angular.forEach(vendor_registration_param.form_data,function(e,a){vendor_registration_param.form_data[a].partial=e.partial.split("/")[e.partial.split("/").length-1]});var e=vendor_registration_param.form_data}return{getField:function(){return e},setField:function(a){e=a}}}),app.controller("postbox_menu",["$scope","vendor_registration_service",function(e,a){e.postboxClass="",e.vendorStoreFieldClass="";var l=a.getField();e.addFormField=function(e,t,s){s.preventDefault();var r=l.length;switch(e){case"selectbox":l.push({id:r,type:e,selecttype:"radio",label:t,hidden:!1,partial:e+".html",required:!1,options:[{value:"option1",label:"Option 1",selected:!1},{value:"option2",label:"Option 2",selected:!0},{value:"option3",label:"Option 3",selected:!1}],cssClass:""});break;case"email":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"textarea":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"checkbox":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",defaultValue:"unchecked",required:!1,cssClass:""});break;case"recaptcha":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",script:"",required:!1});break;case"file":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",fileSize:"",fileType:[{value:"application/pdf",label:"PDF",selected:!1},{value:"image/jpeg",label:"JPEG",selected:!1},{value:"image/png",label:"PNG",selected:!1},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"DOC",selected:!1},{value:"application/vnd.ms-excel",label:"xls",selected:!1}],required:!1,muliple:!1,cssClass:""});break;case"separator":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",cssClass:""});break;case"vendor_description":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"vendor_address_1":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_address_2":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_phone":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_country":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_state":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_city":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_postcode":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_paypal_email":l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;default:l.push({id:r,type:e,label:t,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""})}a.setField(l)},e.togglePostbox=function(){""===e.postboxClass?e.postboxClass="closed":e.postboxClass=""},e.togglevendorStoreField=function(){""===e.vendorStoreFieldClass?e.vendorStoreFieldClass="closed":e.vendorStoreFieldClass=""}}]),app.controller("postbox_content",["$scope","$http","vendor_registration_service",function(e,a,l){var t=l.getField();e.fields=t,e.partialUrl=vendor_registration_param.partials,e.showSaveSpinner=!1,e.togglePostboxField=function(a){e.fields[a].hidden?e.fields[a].hidden=!1:e.fields[a].hidden=!0},e.removeFormField=function(e,a){a.preventDefault(),t.splice(e,1),l.setField(t)},e.addSelectBoxOption=function(a,l){l.preventDefault();var t=e.fields[a].options.length+1;e.fields[a].options.push({value:"option"+t,label:"Option "+t,selected:!1})},e.removeSelectboxOption=function(a,l,t){t.preventDefault(),e.fields[a].options.splice(l,1)},e.fieldSortableOptions={stop:function(e,a){}},e.listOnchange=function(a,l){console.log(e.fields[a].options),angular.forEach(e.fields[a].options,function(t,s){s!==l&&(e.fields[a].options[s].selected=!1)})},e.saveFormData=function(){e.showSaveSpinner=!0;var l=jQuery.param({action:"wcmp_save_vendor_registration_form",form_data:JSON.stringify(e.fields)}),t={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}};a.post(vendor_registration_param.ajax_url,l,t).success(function(a,l,t,s){e.showSaveSpinner=!1}).error(function(a,l,t,s){console.log(a),e.showSaveSpinner=!1})}}]);